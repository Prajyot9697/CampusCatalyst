{% load static %} 
{% block body %} 
{% include 'recruiter_navigation.html' %}

<div class="row mt-3">
    {% for i in recruiter %}
    <div class="col-md-4 mx-auto">
        <div class="card">
            <div class="card-body">
                <h3 class="card-title text-center">Proceed for Payment</h3>
                <p class="text-center">This is the job posting fee for <strong>CampusCatalyst</strong>.</p>
                <p class="text-center"><strong>Amount: â‚¹500</strong></p>
                <form>
                    <div class="form-group">
                        <label for="name">Name:</label>
                        <input type="text" class="form-control" id="name" value="{{i.first_name}} {{i.last_name}}" readonly>
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" class="form-control" id="email" value="{{i.username}}" readonly>
                    </div>
                
                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="termsCheck">
                        <label class="form-check-label" for="termsCheck">I agree to the <a href="contact.html">terms and services</a></label>
                    </div>
                    <button id="rzp-button1" class="btn btn-success btn-block mt-3" disabled>Proceed to Pay</button>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
    var options = {
        "key": "rzp_test_XZo7om8m3825jB", // Enter the Key ID generated from the Dashboard
        "amount": "50000", // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
        "currency": "INR",
        "name": "CampusCatalyst",
        "description": "Job Posting Fee",
        "image": "https://example.com/your_logo",
        "order_id": "{{ payment.id }}", //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
        "handler": function (response) {
            window.location.href='/paymentsuccess';
        },
        "prefill": {
            "name": "Gaurav Kumar",
            "email": "gaurav.kumar@example.com",
            "contact": "9000090000"
        },
        "notes": {
            "address": "Razorpay Corporate Office"
        },
        "theme": {
            "color": "#3399cc"
        }
    };
    var rzp1 = new Razorpay(options);
    rzp1.on('payment.failed', function (response) {
        alert("Payment failed due to: " + response.error.description);
    });

    document.getElementById('termsCheck').onchange = function (e) {
        document.getElementById('rzp-button1').disabled = !e.target.checked;
    };

    document.getElementById('rzp-button1').onclick = function (e) {
        if (document.getElementById('termsCheck').checked) {
            rzp1.open();
            e.preventDefault();
        }
    }
</script>

{% include 'footer.html' %} 
{% endblock body %}
