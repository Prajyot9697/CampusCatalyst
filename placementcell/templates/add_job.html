{% load static %} {% block body %} {% include 'recruiter_navigation.html'%}

<script>
  function checkpass() {
    if (document.signup.pwd.value != document.signup.cpwd.value) {
      alert("Password and Confirm Password field does not match");
      document.signup.cpwd.focus();
      return false;
    }
    return true;
  }
</script>

<marquee
  style="
    font-family: 'Monotype Corsiva';
    font-size: 25px;
    color: darkcolor;
    background-color: lightblue;
    font-weight: bold;
    margin-top: 1%;
  "
>
  Add Job Details
</marquee>

<hr />
<form
  class="container mt-5"
  onsubmit="return checkpass();"
  name="signup"
  method="post"
  enctype="multipart/form-data"
>
  {% csrf_token %}
  <!--  1st Row  -->
  <div class="form-row">
    <div class="form-group col-md-12">
      <label><b> Job Title </b></label>
      <input
        type="text"
        class="form-control"
        name="jobtitle"
        placeholder="Enter Job Title"
        required
      />
    </div>
  </div>

  <!--  2nd Row  -->
  <div class="form-row">
    <div class="form-group col-md-6">
      <label><b> Start Date </b></label>
      <input type="date" class="form-control" name="startdate" required />
    </div>

    <div class="form-group col-md-6">
      <label><b> End Date </b></label>
      <input type="date" class="form-control" name="enddate" required />
    </div>
  </div>

  <!--  3rd Row  -->
  <div class="form-row">
    <div class="form-group col-md-6">
      <label><b> Salary (Per Month) </b></label>
      <input type="Text" class="form-control" name="salary" required />
    </div>

    <div class="form-group col-md-6">
      <label><b> Company Logo </b></label>
      <input
        type="File"
        class="form-control"
        name="logo"
        required
        accept="image/*"
      />
    </div>
  </div>

  <!--  4th Row  -->
  <div class="form-row">
    <div class="form-group col-md-6">
      <label><b> Experience (In Years) </b></label>
      <input type="text" class="form-control" name="experience" required />
    </div>

    <div class="form-group col-md-6">
      <label><b> Company Location </b></label>
      <input type="text" class="form-control" name="location" required />
    </div>
  </div>

  <!--  5th Row  -->
  <div class="form-row">
    <div class="form-group col-md-12">
      <label><b> Skills </b></label>
      <input
        type="text"
        class="form-control"
        name="skills"
        placeholder="Skills Required"
        required
      />
    </div>
  </div>

  <!--  6th Row  -->
  <div class="form-row">
    <div class="form-group col-md-12">
      <label><b> Description </b></label>
      <textarea
        class="form-control"
        name="description"
        placeholder="Enter Job Description"
        required
      ></textarea>
    </div>
  </div>
  <input
    type="submit"
    value="Submit"
    class="btn btn-secondary my-3"
    style="width: 200px"
  />
</form>
<script>
  function checkpass() {
    // Validate Job Title
    var jobTitle = document.signup.jobtitle.value;
    var jobTitleRegex = /^[a-zA-Z()-\s]*$/;
    if (!jobTitleRegex.test(jobTitle)) {
      alert("Job Title should contain only letters.");
      document.signup.jobtitle.focus();
      return false;
    }

    // Validate Start Date
    var startDate = new Date(document.signup.startdate.value);
    var currentDate = new Date();
    if (startDate >= currentDate) {
      alert("Start Date should not be previous to the current date.");
      document.signup.startdate.focus();
      return false;
    }

    // Validate End Date
    var endDate = new Date(document.signup.enddate.value);
    if (endDate < startDate) {
      alert("End Date should not be previous to the Start Date.");
      document.signup.enddate.focus();
      return false;
    }

    // Validate Salary
    var salary = document.signup.salary.value;
    if (isNaN(salary)) {
      alert("Salary should be a number.");
      document.signup.salary.focus();
      return false;
    }

    // Validate Experience
    // var experience = document.signup.experience.value;
    // if (isNaN(experience) || experience < 0) {
    //   alert("Experience should be a positive number.");
    //   document.signup.experience.focus();
    //   return false;
    // }
    var experience = document.signup.experience.value;

    // Check if the input contains only numbers and hyphens
    var validInputRegex = /^[0-9-]+$/;
    if (!validInputRegex.test(experience)) {
        alert("Please enter a valid value (numbers and hyphens only).");
        document.signup.experience.focus();
        return false;

    // Validate Company Location
    var companyLocation = document.signup.location.value;
    var locationRegex = /^[a-zA-Z\s]*$/;
    if (!locationRegex.test(companyLocation)) {
      alert("Company Location should contain only letters.");
      document.signup.location.focus();
      return false;
    }

    // Validate Skills and Description (assuming they should not be empty)
    var skills = document.signup.skills.value;
    var description = document.signup.description.value;
    if (skills.trim() === "" || description.trim() === "") {
      alert("Skills and Description cannot be empty.");
      return false;
    }

    return true;
  }
}
</script>

{% include 'footer.html'%} {% if error == "no" %}
<script>
  alert("Job Details has been Added Successful");
  window.location = ('{% url 'job_list' %}')
</script>
{% endif %} {% if error == "yes" %}
<script>
  alert("Something went wrong, Try Again...");
</script>

{% endif %} {% endblock body%}
